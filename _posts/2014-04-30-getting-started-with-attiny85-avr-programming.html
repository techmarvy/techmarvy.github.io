---
layout: post
title: Getting started with ATtiny85 (AVR Programming)
excerpt: Getting started with ATtiny85 (AVR Programming)
date: 2014-04-30 20:44:00.000000000 +05:30
categories:
- AVR Programming
tags:
- ATtiny
- ATtiny85
- AVR
- tinyAVR
status: publish
type: post
published: true
comments: true
meta:
  _edit_last: '5'
  _oembed_ab2bd0864bbc894eccd3c82f1f9b1310: '{{unknown}}'
thumbnail: images/2014/04/IMG_3629.jpg
---
<p style="padding: 20px;">
<img src="{{ site.baseurl}}/images/2014/04/IMG_3628.jpg"/>
</p>
<p>I just got the batch of ATtiny85s I ordered for some pals at a local Maker group. I have <a href="http://electronut.in/tag/attiny84/">articles here on ATtiny84</a>, but not on this chip. So here are some quick notes on getting started with the ATtiny85.</p>
<p>The first thing you need to program the chip is an AVR programmer. I am using a <a href="https://www.sparkfun.com/products/9825">Pocket AVR Programmer</a> from Sparkfun. But you can buy much cheaper programmers. Look for USBtiny programmers - in India you can get one of these for about Rs. 350 from ebay.in.</p>
<p><!--more--></p>
<p>Next, you need to get the ATtiny85 datasheet from Atmel (Time to do a web search!). Read through it. If this is the first time you are looking at one of these, it will look horribly complex. But don't worry, over time it will start to make sense. Here is the pin information for the ATtiny85, from the datasheet.</p>

<p style="padding: 20px;">
<img src="{{ site.baseurl }}/images/2014/04/attiny85-pinout.png"/>
</p>
<p>Now, we need to hook up our programmer to this chip. The connections you need for programming are VCC, GND, MISO, MOSI, SCK and RESET. These are clearly marked on the programmer, and from the above diagram, you know the corresponding pin on the chip. The programmer connects to your computer via the USB port. (Follow the instructions that came with the programmer to install drivers, etc.). One thing to note is that you are powering the chip using VCC from the programmer - so make sure that you enable that power switch on the programmer, if yours has one. Hook up a 100 Ohm resistor and an LED to PB3 (pin 2) of the ATtiny85. This is what my setup looks like.</p>

<p style="padding: 20px;">
<img src="{{ site.baseurl }}/images/2014/04/IMG_3629.jpg" />
</p>

<p>Next, you need some tools to program the chip. There are many ways of doing this, but I use <a href="http://savannah.nongnu.org/projects/avrdude">AVRDude</a>. This will help you compile your code, generate the hex file, and flash it into the chip.</p>
<p>Now it's time to write some C code. The program below toggles PB3 on the chip on and off, making the LED blink.</p>
<p><script src="https://gist.github.com/electronut/7f2b10eecd4f88f51ce0.js"></script></p>
<p>Next, you need a Makefile to do the magic of building your code. Here is a Makefile I modified from the one generated by <a href="http://www.obdev.at/products/crosspack/index.html">CrossPack</a>.</p>
<p><a href="https://gist.github.com/electronut/8a4c297213620958ebef">https://gist.github.com/electronut/8a4c297213620958ebef<br />
</a></p>
<p>This is how you program the chip from the command line:</p>
<p><code>$make install<br />
</code></p>
<p>You'll get a flurry of messages from AVRDude, and then if it all works, you will see a happy blinking LED. ;-)</p>
<p>Now you can remove the programmer, and by supplying 3V to VCC and GND pins, it will still work (as it should!).</p>

<p style="padding: 20px;">
<img src="{{ site.baseurl }}/images/2014/04/IMG_3630.jpg"/>
</p>

<p>I know this is short, but it should get you started. This is a vast topic, and if you want to go beyond blinking an LED, some research and tinkering is unavoidable. But these chips are amazing and can do a lot - so experiment, and have fun! :-)</p>
<p><strong>Some useful resources for AVR Programming<br />
</strong></p>
<p>Adafruit Tutorial:<br />
<a href=" http://www.ladyada.net/learn/avr/avrdude.html"><br />
http://www.ladyada.net/learn/avr/avrdude.html</a></p>
<p>Hackaday Tutorial:</p>
<p><a href="http://hackaday.com/2010/10/23/avr-programming-introduction/">http://hackaday.com/2010/10/23/avr-programming-introduction/</a></p>
<p><strong>Note for Windows Users</strong></p>
<p>The above notes are for OS X, which translates easily for Linux and variants. If you are a Windows user, I recommend that you <a href="http://www.mingw.org/wiki/MSYS">download MSYS</a>, a collection of GNU utilities which will give you many of the nice Unixy command line utilities like sh, gmake, grep, etc.</p>
